/*
Zoomer v1
WB--Tech.Lab plugins family (jQuery depended)
Plugin #6 for zoomimg image fragments version 1
Released under the MIT licence http://opensource.org/licenses/mit-license.php
Date of release 8.10.2012

README see at wbtech.pro/blog/zoom2
example see at wbtech.pro/cases/zoom2

*/

/* SHORT MANUAL
1. create array "zoomed_info" to set zooming images
2. set images with zooming areas. legend:
	x,y,zoom-coeff,zoom-file-src,zoom-file-width,zoom-file-height
	x and y are coordinates relative to whole image-canvas when it's zoomed
3. put code in #zoom-map id

var zoomed_info=[
[1600,1000,2.5,'folder/image.src',800,800],
[1250,1280,2.5,'folder/image2.src',800,800]
];

*/


var zoom_obj="#zoom-map";var z;var x;var y;var w;var h;var num;var zoom_pics=new Array();$(document).ready(function(){var zoom_img=$(zoom_obj).children("img:eq(0)");var zoom_width=parseInt($(zoom_img).css("width"))/2;var zoom_height=parseInt($(zoom_img).css("height"))/2;$(zoom_obj).css({"width":2*zoom_width+"px","height":2*zoom_height+"px"})
for(i=0;i<zoomed_info.length;i++){$(zoom_obj).append('<div class="zoom-pointer" style="left:'+
zoomed_info[i][0]/zoomed_info[i][2]+'px;top:'+
zoomed_info[i][1]/zoomed_info[i][2]+'px;" data-zoom="'+
zoomed_info[i][2]+'"></div><img width="'+
zoomed_info[i][4]+'" height="'+
zoomed_info[i][5]+'" class="zoomed" src="'+
zoomed_info[i][3]+'">');};var zoom_pointers=$(".zoom-pointer");for(i=0;i<zoom_pointers.length;i++){w=parseInt($(".zoomed:eq("+i+")").css("width"))/2;h=parseInt($(".zoomed:eq("+i+")").css("height"))/2;$(".zoomed:eq("+i+")").css({"top":(zoom_height-h)+"px","left":(zoom_width-w)+"px"})}
$(".zoom-pointer").click(function(){num=$(".zoom-pointer").index(this);z=$(this).attr("data-zoom");x=$(this).css("left");x=parseInt(x);y=$(this).css("top");y=parseInt(y);$(zoom_img).fadeTo("fast",.8).animate({"marginLeft":(zoom_width-z*x),"marginTop":(zoom_height-z*y),width:(2*z*zoom_width),height:(2*z*zoom_height)},{queue:false,duration:400});$(this).animate({left:zoom_width,top:zoom_height,"opacity":"hide"});$(".zoom-pointer").animate({"opacity":"hide"});setTimeout(function(){$(zoom_img).fadeTo("fast",1);$(".zoomed:eq("+num+")").animate({"opacity":"show"},{duration:400})},300);});$(".zoomed").click(function(){$(zoom_img).fadeTo("fast",.8).animate({"marginLeft":0,"marginTop":0,width:(2*zoom_width),height:(2*zoom_height)},{queue:false,duration:400,complete:$(zoom_img).fadeTo("fast",1)});$(this).hide();$(this).prev(".zoom-pointer:hidden").animate({left:x+"px",top:y+"px","opacity":"show"});$(".zoom-pointer").animate({"opacity":"show"});});});